"use strict";function productsCtrl(e,t,o,r){function c(e,t){e.cancel=function(){t.cancel()}}e.isOpen=!1,e.readProducts=function(){r.readProducts().then(function(t){e.products=t.data},function(t){e.showToast("Unable to read record.")})},e.showCreateProductForm=function(o){t.show({controller:c,templateUrl:"views/modals/create_product.html",parent:angular.element(document.body),clickOutsideToClose:!0,scope:e,preserveScope:!0,fullscreen:!1})},e.createProduct=function(){r.createProduct(e).then(function(t){e.showToast(t.statusText),e.readProducts(),e.cancel(),e.clearProductForm()},function(t){e.showToast("Unable to create record.")})},e.clearProductForm=function(){e.id="",e.name="",e.description="",e.price=""},e.showToast=function(e){o.show(o.simple().textContent(e).hideDelay(3e3).position("top right fixed"))},e.editProduct=function(o){r.editProduct(o).then(function(o){e.id=o.data.id,e.name=o.data.name,e.description=o.data.description,e.price=o.data.price,t.show({controller:c,templateUrl:"views/modals/edit_product.html",parent:angular.element(document.body),clickOutsideToClose:!0,scope:e,preserveScope:!0,fullscreen:!1}).then(function(){},function(){e.clearProductForm()})},function(t){e.showToast("Unable to retrieve record.")})},e.updateProduct=function(){r.updateProduct(e).then(function(t){e.showToast(t.statusText),e.readProducts(),e.cancel(),e.clearProductForm()},function(t){e.showToast("Unable to update record.")})},e.confirmDeleteProduct=function(o,r){e.id=r;var c=t.confirm().title("Are you sure?").textContent("Product will be deleted.").targetEvent(o).ok("Yes, delete").cancel("No");t.show(c).then(function(){e.deleteProduct(r)},function(){})},e.deleteProduct=function(t){r.deleteProduct(t).then(function(t){e.showToast("Successfully deleted"),e.readProducts()},function(t){e.showToast("Unable to delete record.")})}}function productsService(e){var t={};return t.readProducts=function(){return e.get(serviceBase+"products")},t.createProduct=function(t){new Date;return e({method:"POST",data:{name:t.name,description:t.description,price:t.price,category_id:1,created:(new Date).toISOString().slice(0,19).replace("T"," ")},url:serviceBase+"products"})},t.editProduct=function(t){return e({method:"GET",url:serviceBase+"products/"+t})},t.updateProduct=function(t){return e({method:"PATCH",data:{name:t.name,description:t.description,price:t.price,category_id:1,modified:(new Date).toISOString().slice(0,19).replace("T"," ")},url:serviceBase+"products/"+t.id})},t.deleteProduct=function(t){return e({method:"DELETE",url:serviceBase+"products/"+t})},t}function routing(e,t,o){e.when("/admin/products",{templateUrl:"views/admin/products.html",controller:"productsController"}).otherwise("/admin/products",{templateUrl:"views/admin/products.html",controller:"productsController"}),o.theme("deep-orange").primaryPalette("deep-orange"),o.theme("blue").primaryPalette("blue"),o.theme("green").primaryPalette("green")}var serviceBase="http://localhost:5000/",app=angular.module("phpAngular",["ngAnimate","ngMaterial","ngRoute"]);app.controller("productsController",["$scope","$mdDialog","$mdToast","productsService",productsCtrl]),app.factory("productsService",["$http",productsService]),app.config(["$routeProvider","$locationProvider","$mdThemingProvider",routing]);